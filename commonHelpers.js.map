{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { picCont } from \"./pixabay-api\";\n\nfunction pictureTemplate({webformatURL,largeImageURL,tags,likes,views,comments,downloads}){\n  return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n    </a>\n    <ul class=\"description\">\n      <li class=\"description-item\">\n        <h2>likes</h2>\n        <h3>${likes}</h3>\n      </li>\n      <li class=\"description-item\">\n        <h2>views</h2>\n        <h3>${views}</h3>\n      </li>\n      <li class=\"description-item\">\n        <h2>comments</h2>\n        <h3>${comments}</h3>\n      </li>\n      <li class=\"description-item\">\n        <h2>downloads</h2>\n        <h3>${downloads}</h3>\n      </li>\n    </ul>\n  </li> `;\n}\n\n\nfunction picturesTemplate(picture){\n  let  pictureProm = picture.hits.map(pictureTemplate).join('');\n  if(pictureProm.length === 0){\n    iziToast.show({\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      messageColor: '#FFFFFF',\n      backgroundColor: '#B51B1B',\n      position: 'topRight',\n    });\n    return;\n  }else{\n    return pictureProm;\n  }\n}\n\nexport function renderPicture(picture) {\n  const markup = picturesTemplate(picture);\n  if(markup.length === 0)return;\n  picCont.insertAdjacentHTML('beforeend', markup);\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\nimport { renderPicture } from \"./render-functions\";\n\nexport const picCont = document.querySelector('.gallery')\n\nconst picContAdd = document.querySelector('.js_picture_load');\nconst loadElemLast = document.getElementById(\"loader_serch\");\nconst input = document.querySelector('.js-search-form');\n\nlet currentPage = 1;\nlet nameSearch = '';\nlet PER_PAGE = 15;\nlet namHits;\nlet heightScrol;\n\n\ninput.addEventListener('submit', onFormSubmit);\npicContAdd.addEventListener('click', onSearchMore);\n\nasync function onFormSubmit(e){\n      e.preventDefault();\n      hideSearch();\n      nameSearch = e.target.elements.form.value.trim();\n      picCont.innerHTML = \"\";\n      currentPage = 1;\n      if(nameSearch === ''){\n      e.target.reset();\n      picCont.innerHTML = \"\";\n      noSearch();\n        return;\n    }\n    let namberHits;\n    try {\n      const data = await searchPicture();\n      namberHits = data.totalHits;\n      renderPicture(data);\n      gallery.refresh();\n    } catch (error) {\n      noSearch();\n      e.target.reset();\n      console.error('Error retrieving image link:', error);\n    }\n    const elementImage = document.querySelector('.gallery-item');\n    const elementImageParams = elementImage.getBoundingClientRect();\n    const heightElement = elementImageParams.height;\n    heightScrol = heightElement + heightElement;\n    namHits = namberHits;\n    e.target.reset();\n    checkBtnStatus();\n};\n\n\n\nasync function searchPicture(){\n    const BASE_URL = 'https://pixabay.com/api/?';\n    const params = new URLSearchParams({\n    key: '42108829-54920070c40067c28d8228e80',\n    q: nameSearch,\n    image_type:'photo',\n    orientation:'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: PER_PAGE,\n  });\n  const url = BASE_URL;\n   try{\n     const res = await axios.get(url, {params});\n     return res.data;\n   }catch(error){\n     console.error('Error retrieving image link:', error);\n   };\n}\n\n\nasync function onSearchMore (){\n  currentPage += 1;\n  hideSearch();\n  try {\n    const data = await searchPicture();\n    renderPicture(data);\n    gallery.refresh();\n  } catch (error) {\n    console.error('Error retrieving image link:', error);\n  }\n  window.scrollBy({\n    top: `${heightScrol}`,\n    behavior: 'smooth',\n  });\n  checkBtnStatus();\n}\n\nfunction checkBtnStatus() {\n  const maxPage = Math.ceil(namHits/ PER_PAGE);\n  const isLastPage = maxPage <= currentPage;\n  if (isLastPage) {\n    iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      messageColor: '#FFFFFF',\n      backgroundColor: '#1bb5b0',\n      position: 'topRight',\n    });\n    noButton();\n    noSearch();\n  } else {\n    showSearch();\n  }\n}\n\nfunction showSearch() {\n  loadElemLast.classList.add('is-open')\n  picContAdd.classList.remove('hidden');\n}\n\nexport function hideSearch() {\n  loadElemLast.classList.remove('is-open')\n  picContAdd.classList.add('hidden');\n}\nfunction noSearch(){\n  loadElemLast.classList.add('is-open')\n}\nfunction noButton(){\n  picContAdd.classList.add('hidden');\n}\n\nconst gallery = new SimpleLightbox('.gallery a', {captionDelay: 250, captionsData: 'alt'});\n"],"names":["pictureTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","picturesTemplate","picture","pictureProm","iziToast","renderPicture","markup","picCont","picContAdd","loadElemLast","input","currentPage","nameSearch","PER_PAGE","namHits","heightScrol","onFormSubmit","onSearchMore","e","hideSearch","noSearch","namberHits","data","searchPicture","gallery","error","heightElement","checkBtnStatus","BASE_URL","params","url","axios","noButton","showSearch","SimpleLightbox"],"mappings":"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"}