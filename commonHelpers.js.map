{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport { picCont } from \"./pixabay-api\";\n\nfunction pictureTemplate({webformatURL,largeImageURL,tags,likes,views,comments,downloads}){\n  return `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n    </a>\n    <ul class=\"description\">\n      <li class=\"description-item\">\n        <h2>likes</h2>\n        <h3>${likes}</h3>\n      </li>\n      <li class=\"description-item\">\n        <h2>views</h2>\n        <h3>${views}</h3>\n      </li>\n      <li class=\"description-item\">\n        <h2>comments</h2>\n        <h3>${comments}</h3>\n      </li>\n      <li class=\"description-item\">\n        <h2>downloads</h2>\n        <h3>${downloads}</h3>\n      </li>\n    </ul>\n</li> `; }\n\nfunction picturesTemplate(picture){\n\n  let  pictureProm = picture.hits.map(pictureTemplate).join('');\n\n  if(pictureProm.length === 0){\n    iziToast.show({\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      messageColor: '#FFFFFF',\n      backgroundColor: '#B51B1B',\n      position: 'topRight',\n    });\n    return;\n  }else{\n    return pictureProm ;\n  }\n}\n\nexport function renderPicture(picture) {\n  const markup = picturesTemplate(picture);\n  if(markup.length === 0)return;\n  picCont.insertAdjacentHTML('beforeend', markup);\n}\n","import \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from 'axios';\nimport { renderPicture } from \"./render-functions\";\n\nconst picContAdd = document.querySelector('.js_picture_load');\nconst loadElem = document.querySelector('.js-loader');\n\nexport const picCont = document.querySelector('.gallery')\n\nconst input = document.querySelector('.js-search-form');\n\ninput.addEventListener('submit', onFormSubmit);\npicContAdd.addEventListener('click', onSearchMore);\n\n\nasync function onFormSubmit(e){\n  e.preventDefault();\n  document.getElementById(\"loader\").style.display = \"flex\";\n   test = e.target.elements.form.value.trim();\n  picCont.innerHTML = \"\";\n  currentPage = 1;\n  if(test === ''){\n  e.target.reset();\n  picCont.innerHTML = \"\";\n  document.getElementById(\"loader\").style.display = \"none\";\n  hideSearch();\n  return;\n}\n\ntry {\n  const data = await searchPicture();\n  document.getElementById(\"loader\").style.display = \"none\";\n  renderPicture(data);\n  showSearch();\n  gallery.refresh();\n} catch (error) {\n  console.error('Error retrieving image link:', error);\n}\n  e.target.reset();\n};\n\nlet currentPage = 1;\nlet test = null;\n\n\nasync function searchPicture(){\n  const BASE_URL = 'https://pixabay.com/api/?';\nconst params = new URLSearchParams({\n  key: '42108829-54920070c40067c28d8228e80',\n  q: test,\n  image_type:'photo',\n  orientation:'horizontal',\n  safesearch: true,\n  page: currentPage,\n  per_page: 15,\n});\nconst url = BASE_URL;\n\n\n   try{\n     const res = await axios.get(url, {params});\n     return res.data;\n   }catch(error){\n     console.error('Error retrieving image link:', error);\n   };\n}\nasync function onSearchMore (){\n  hideSearch();\n  currentPage += 1;\n  try {\n    const data = await searchPicture();\n    document.getElementById(\"loader\").style.display = \"none\";\n    renderPicture(data);\n    showSearch();\n    gallery.refresh();\n  } catch (error) {\n    console.error('Error retrieving image link:', error);\n  }\n\n}\n\n\nfunction showSearch() {\n  loadElem.classList.add('hidden');\n  picContAdd.classList.remove('hidden');\n}\n\nfunction hideSearch() {\n  loadElem.classList.add('hidden');\n  picContAdd.classList.add('hidden');\n}\n\n\nconst gallery = new SimpleLightbox('.gallery a', {captionDelay: 250, captionsData: 'alt'});\n"],"names":["pictureTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","picturesTemplate","picture","pictureProm","iziToast","renderPicture","markup","picCont","picContAdd","loadElem","input","onFormSubmit","onSearchMore","test","currentPage","hideSearch","data","searchPicture","showSearch","gallery","error","BASE_URL","params","url","axios","SimpleLightbox"],"mappings":"+vBAGA,SAASA,EAAgB,CAAC,aAAAC,EAAa,cAAAC,EAAc,KAAAC,EAAK,MAAAC,EAAM,MAAAC,EAAM,SAAAC,EAAS,UAAAC,CAAS,EAAE,CACxF,MAAO;AAAA,kCACyBL,CAAa;AAAA,sCACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,cAKlDC,CAAK;AAAA;AAAA;AAAA;AAAA,cAILC,CAAK;AAAA;AAAA;AAAA;AAAA,cAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,cAIRC,CAAS;AAAA;AAAA;AAAA,OAGb,CAEV,SAASC,EAAiBC,EAAQ,CAEhC,IAAKC,EAAcD,EAAQ,KAAK,IAAIT,CAAe,EAAE,KAAK,EAAE,EAE5D,GAAGU,EAAY,SAAW,EAAE,CAC1BC,EAAS,KAAK,CACZ,QAAS,2EACT,aAAc,UACd,gBAAiB,UACjB,SAAU,UAChB,CAAK,EACD,MACJ,KACI,QAAOD,CAEX,CAEO,SAASE,EAAcH,EAAS,CACrC,MAAMI,EAASL,EAAiBC,CAAO,EACpCI,EAAO,SAAW,GACrBC,EAAQ,mBAAmB,YAAaD,CAAM,CAChD,CC3CA,MAAME,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAW,SAAS,cAAc,YAAY,EAEvCF,EAAU,SAAS,cAAc,UAAU,EAElDG,EAAQ,SAAS,cAAc,iBAAiB,EAEtDA,EAAM,iBAAiB,SAAUC,CAAY,EAC7CH,EAAW,iBAAiB,QAASI,CAAY,EAGjD,eAAeD,EAAa,EAAE,CAM5B,GALA,EAAE,eAAc,EAChB,SAAS,eAAe,QAAQ,EAAE,MAAM,QAAU,OACjDE,EAAO,EAAE,OAAO,SAAS,KAAK,MAAM,OACrCN,EAAQ,UAAY,GACpBO,EAAc,EACXD,IAAS,GAAG,CACf,EAAE,OAAO,QACTN,EAAQ,UAAY,GACpB,SAAS,eAAe,QAAQ,EAAE,MAAM,QAAU,OAClDQ,IACA,MACF,CAEA,GAAI,CACF,MAAMC,EAAO,MAAMC,IACnB,SAAS,eAAe,QAAQ,EAAE,MAAM,QAAU,OAClDZ,EAAcW,CAAI,EAClBE,IACAC,EAAQ,QAAO,CACjB,OAASC,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,CACrD,CACE,EAAE,OAAO,OACX,CAEA,IAAIN,EAAc,EACdD,EAAO,KAGX,eAAeI,GAAe,CAC5B,MAAMI,EAAW,4BACbC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGT,EACH,WAAW,QACX,YAAY,aACZ,WAAY,GACZ,KAAMC,EACN,SAAU,EACZ,CAAC,EACKS,EAAMF,EAGT,GAAG,CAED,OADY,MAAMG,EAAM,IAAID,EAAK,CAAC,OAAAD,CAAM,CAAC,GAC9B,IACZ,OAAMF,EAAM,CACX,QAAQ,MAAM,+BAAgCA,CAAK,CACxD,CACA,CACA,eAAeR,GAAe,CAC5BG,IACAD,GAAe,EACf,GAAI,CACF,MAAME,EAAO,MAAMC,IACnB,SAAS,eAAe,QAAQ,EAAE,MAAM,QAAU,OAClDZ,EAAcW,CAAI,EAClBE,IACAC,EAAQ,QAAO,CAChB,OAAQC,EAAO,CACd,QAAQ,MAAM,+BAAgCA,CAAK,CACpD,CAEH,CAGA,SAASF,GAAa,CACpBT,EAAS,UAAU,IAAI,QAAQ,EAC/BD,EAAW,UAAU,OAAO,QAAQ,CACtC,CAEA,SAASO,GAAa,CACpBN,EAAS,UAAU,IAAI,QAAQ,EAC/BD,EAAW,UAAU,IAAI,QAAQ,CACnC,CAGA,MAAMW,EAAU,IAAIM,EAAe,aAAc,CAAC,aAAc,IAAK,aAAc,KAAK,CAAC"}